---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Trey Helmer Â· Secret">
  <header class="flex flex-col gap-2">
    <p class="text-sm font-medium tracking-wide text-white/60">Secret</p>
    <h1 class="text-2xl font-semibold text-white/95 sm:text-3xl">Member vault</h1>
    <p class="max-w-2xl text-white/70">Cheesy bonus content unlocked after login.</p>
  </header>

  <section class="mt-8">
    <div class="mx-auto max-w-2xl rounded-2xl border border-white/10 bg-white/5 p-6">
      <div id="secret-loading" class="rounded-xl border border-white/10 bg-ink-900/50 px-4 py-3 text-sm text-white/80">
        Checking authentication state...
      </div>

      <div
        id="secret-error"
        class="mt-4 hidden rounded-xl border border-red-400/30 bg-red-950/40 px-4 py-3 text-sm text-red-100"
      >
        <p class="font-semibold">Auth0 setup issue</p>
        <p id="secret-error-details" class="mt-1 whitespace-pre-wrap text-red-100/90"></p>
      </div>

      <div id="secret-logged-out" class="mt-4 hidden space-y-4 rounded-xl border border-white/10 bg-ink-900/40 p-6">
        <p class="text-sm text-white/70">
          You are not logged in yet. Authenticate first, then this page unlocks.
        </p>
        <button
          id="secret-login-button"
          class="rounded-xl bg-white px-4 py-2.5 text-sm font-semibold text-ink-950 hover:bg-white/90"
          type="button"
        >
          Log in to unlock
        </button>
      </div>

      <div id="secret-logged-in" class="mt-4 hidden space-y-5 rounded-xl border border-emerald-300/20 bg-emerald-400/5 p-6">
        <p class="text-sm font-semibold text-emerald-300">Access granted</p>
        <h2 class="text-xl font-semibold text-white/95">Top secret briefing</h2>
        <p id="secret-greeting" class="text-sm text-white/70"></p>
        <div class="rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-white/75">
          Project Raven status: very classified. Mission objective: keep building cool stuff.
        </div>
        <div class="flex flex-wrap gap-3">
          <a
            href="/portfolio"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
          >
            Back to portfolio
          </a>
          <button
            id="secret-logout-button"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
            type="button"
          >
            Log out
          </button>
        </div>
      </div>
    </div>
  </section>

  <script>
    import "../scripts/auth0-secret.ts";
  </script>
</BaseLayout>
