---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Trey Helmer · Secret">
  <header class="flex flex-col gap-2">
    <p class="text-sm font-medium tracking-wide text-white/60">Secret</p>
    <h1 class="text-2xl font-semibold text-white/95 sm:text-3xl">Member vault</h1>
    <p class="max-w-2xl text-white/70">Cheesy bonus content unlocked after login.</p>
  </header>

  <section class="mt-8">
    <div class="mx-auto max-w-2xl rounded-2xl border border-white/10 bg-white/5 p-6">
      <div id="secret-loading" class="rounded-xl border border-white/10 bg-ink-900/50 px-4 py-3 text-sm text-white/80">
        Checking authentication state...
      </div>

      <div
        id="secret-error"
        class="mt-4 hidden rounded-xl border border-red-400/30 bg-red-950/40 px-4 py-3 text-sm text-red-100"
      >
        <p class="font-semibold">Auth0 setup issue</p>
        <p id="secret-error-details" class="mt-1 whitespace-pre-wrap text-red-100/90"></p>
      </div>

      <div id="secret-logged-out" class="mt-4 hidden space-y-4 rounded-xl border border-white/10 bg-ink-900/40 p-6">
        <p class="text-sm text-white/70">
          You are not logged in yet. Authenticate first, then this page unlocks.
        </p>
        <button
          id="secret-login-button"
          class="rounded-xl bg-white px-4 py-2.5 text-sm font-semibold text-ink-950 hover:bg-white/90"
          type="button"
        >
          Log in to unlock
        </button>
      </div>

      <div id="secret-logged-in" class="mt-4 hidden space-y-5 rounded-xl border border-emerald-300/20 bg-emerald-400/5 p-6">
        <p class="text-sm font-semibold text-emerald-300">Access granted</p>
        <h2 class="text-xl font-semibold text-white/95">Top secret briefing</h2>
        <p id="secret-greeting" class="text-sm text-white/70"></p>
        <div class="rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-white/75">
          Project Raven status: very classified. Mission objective: keep building cool stuff.
        </div>
        <div class="space-y-3">
          <p class="text-sm font-semibold text-white/90">Mission map</p>
          <div class="relative overflow-hidden rounded-2xl border border-white/15 bg-ink-950/80 p-4">
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_18%_16%,rgba(244,63,94,0.16),transparent_48%),radial-gradient(circle_at_82%_70%,rgba(56,189,248,0.16),transparent_42%)]"></div>
            <div class="absolute inset-0 bg-[linear-gradient(120deg,rgba(2,6,23,0.88),rgba(15,23,42,0.35),rgba(2,6,23,0.88))]"></div>
            <svg viewBox="0 0 640 360" class="relative z-10 w-full">
              <defs>
                <linearGradient id="route-primary" x1="0" y1="0" x2="1" y2="0">
                  <stop offset="0%" stop-color="#fb7185" />
                  <stop offset="55%" stop-color="#f59e0b" />
                  <stop offset="100%" stop-color="#22d3ee" />
                </linearGradient>
                <linearGradient id="route-secondary" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stop-color="#e2e8f0" stop-opacity="0.45" />
                  <stop offset="100%" stop-color="#e2e8f0" stop-opacity="0.05" />
                </linearGradient>
                <radialGradient id="node-glow" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#ffffff" stop-opacity="0.9" />
                  <stop offset="100%" stop-color="#ffffff" stop-opacity="0" />
                </radialGradient>
                <pattern id="micro-grid" width="16" height="16" patternUnits="userSpaceOnUse">
                  <path d="M16 0 H0 V16" fill="none" stroke="rgba(148,163,184,0.12)" stroke-width="1" />
                </pattern>
                <filter id="route-glow" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur stdDeviation="4" result="blur" />
                  <feMerge>
                    <feMergeNode in="blur"></feMergeNode>
                    <feMergeNode in="SourceGraphic"></feMergeNode>
                  </feMerge>
                </filter>
              </defs>
              <rect x="1" y="1" width="638" height="358" rx="14" fill="#020617" stroke="rgba(255,255,255,0.14)" />
              <rect x="1" y="1" width="638" height="358" rx="14" fill="url(#micro-grid)" opacity="0.65" />
              <g opacity="0.25" stroke="rgba(148,163,184,0.7)" stroke-width="1">
                <path d="M0 72 H640 M0 144 H640 M0 216 H640 M0 288 H640" />
                <path d="M106 0 V360 M212 0 V360 M318 0 V360 M424 0 V360 M530 0 V360" />
              </g>
              <g fill="rgba(51,65,85,0.65)" stroke="rgba(148,163,184,0.18)" stroke-width="1">
                <path d="M62 230 L120 178 L212 198 L262 256 L188 308 L100 292 Z" />
                <path d="M270 120 L354 84 L428 134 L398 210 L324 220 L276 182 Z" />
                <path d="M448 198 L510 152 L586 188 L560 266 L488 286 L434 248 Z" />
              </g>
              <path
                d="M90 254 C156 164, 222 132, 288 154 C354 176, 416 238, 540 172"
                fill="none"
                stroke="url(#route-secondary)"
                stroke-width="9"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M90 254 C156 164, 222 132, 288 154 C354 176, 416 238, 540 172"
                fill="none"
                stroke="url(#route-primary)"
                stroke-width="4"
                stroke-linecap="round"
                stroke-linejoin="round"
                filter="url(#route-glow)"
              />
              <path
                d="M288 154 C330 100, 398 90, 476 124"
                fill="none"
                stroke="#fca5a5"
                stroke-width="2.5"
                stroke-dasharray="6 8"
                stroke-linecap="round"
              />
              <g>
                <circle cx="90" cy="254" r="22" fill="url(#node-glow)" opacity="0.4" />
                <circle cx="288" cy="154" r="22" fill="url(#node-glow)" opacity="0.38" />
                <circle cx="540" cy="172" r="24" fill="url(#node-glow)" opacity="0.44" />
                <circle cx="90" cy="254" r="8" fill="#fb7185" />
                <circle cx="288" cy="154" r="8" fill="#f59e0b" />
                <circle cx="540" cy="172" r="8" fill="#22d3ee" />
                <circle cx="476" cy="124" r="6" fill="#fca5a5" />
              </g>
              <g fill="rgba(226,232,240,0.95)" font-size="14" font-weight="600">
                <text x="106" y="246">HQ · Atlanta</text>
                <text x="304" y="146">Ops Relay · Austin</text>
                <text x="304" y="164" fill="rgba(226,232,240,0.78)" font-size="12">Threat index: low · uptime: 99.98%</text>
                <text x="556" y="166">Raven Node · Remote</text>
                <text x="556" y="184" fill="rgba(226,232,240,0.78)" font-size="12">Signal lock: stable</text>
                <text x="494" y="116" fill="rgba(252,165,165,0.9)" font-size="11">Backup corridor</text>
              </g>
              <text x="28" y="38" fill="rgba(148,163,184,0.8)" font-size="11" letter-spacing="0.18em">SECTOR MAP v2.7</text>
            </svg>
          </div>
          <p class="text-xs text-white/60">
            This map may or may not be powered by coffee, late-night commits, and highly tactical snack breaks.
          </p>
        </div>
        <div class="space-y-2 rounded-xl border border-amber-300/25 bg-amber-400/5 p-4">
          <p class="text-sm font-semibold text-amber-200">Code Word</p>
          <p class="text-lg font-semibold tracking-wide text-amber-100">Beans</p>
        </div>
        <div class="flex flex-wrap gap-3">
          <a
            href="/portfolio"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
          >
            Back to portfolio
          </a>
          <button
            id="secret-logout-button"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
            type="button"
          >
            Log out
          </button>
        </div>
      </div>
    </div>
  </section>

  <script>
    import "../scripts/auth0-secret.ts";
  </script>
</BaseLayout>
