---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Trey Helmer 路 Secret">
  <header class="flex flex-col gap-2">
    <p class="text-sm font-medium tracking-wide text-white/60">Secret</p>
    <h1 class="text-2xl font-semibold text-white/95 sm:text-3xl">Member vault</h1>
    <p class="max-w-2xl text-white/70">Cheesy bonus content unlocked after login.</p>
  </header>

  <section class="mt-8">
    <div class="mx-auto max-w-2xl rounded-2xl border border-white/10 bg-white/5 p-6">
      <div id="secret-loading" class="rounded-xl border border-white/10 bg-ink-900/50 px-4 py-3 text-sm text-white/80">
        Checking authentication state...
      </div>

      <div
        id="secret-error"
        class="mt-4 hidden rounded-xl border border-red-400/30 bg-red-950/40 px-4 py-3 text-sm text-red-100"
      >
        <p class="font-semibold">Auth0 setup issue</p>
        <p id="secret-error-details" class="mt-1 whitespace-pre-wrap text-red-100/90"></p>
      </div>

      <div id="secret-logged-out" class="mt-4 hidden space-y-4 rounded-xl border border-white/10 bg-ink-900/40 p-6">
        <p class="text-sm text-white/70">
          You are not logged in yet. Authenticate first, then this page unlocks.
        </p>
        <button
          id="secret-login-button"
          class="rounded-xl bg-white px-4 py-2.5 text-sm font-semibold text-ink-950 hover:bg-white/90"
          type="button"
        >
          Log in to unlock
        </button>
      </div>

      <div id="secret-logged-in" class="mt-4 hidden space-y-5 rounded-xl border border-emerald-300/20 bg-emerald-400/5 p-6">
        <p class="text-sm font-semibold text-emerald-300">Access granted</p>
        <h2 class="text-xl font-semibold text-white/95">Top secret briefing</h2>
        <p id="secret-greeting" class="text-sm text-white/70"></p>
        <div class="rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-white/75">
          Project Raven status: very classified. Mission objective: keep building cool stuff.
        </div>
        <div class="space-y-3">
          <p class="text-sm font-semibold text-white/90">Mission map</p>
          <div class="relative overflow-hidden rounded-2xl border border-cyan-300/20 bg-ink-950/70 p-4">
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(34,211,238,0.14),transparent_55%)]"></div>
            <svg viewBox="0 0 640 360" class="relative z-10 w-full">
              <defs>
                <linearGradient id="route" x1="0" y1="0" x2="1" y2="0">
                  <stop offset="0%" stop-color="#22d3ee" />
                  <stop offset="100%" stop-color="#34d399" />
                </linearGradient>
              </defs>
              <rect x="1" y="1" width="638" height="358" rx="14" fill="none" stroke="rgba(255,255,255,0.10)" />
              <g opacity="0.18" stroke="rgba(148,163,184,0.9)" stroke-width="1">
                <path d="M0 60 H640 M0 120 H640 M0 180 H640 M0 240 H640 M0 300 H640" />
                <path d="M80 0 V360 M160 0 V360 M240 0 V360 M320 0 V360 M400 0 V360 M480 0 V360 M560 0 V360" />
              </g>
              <path
                d="M132 212 C200 120, 285 98, 338 150 C402 210, 466 214, 520 156"
                fill="none"
                stroke="url(#route)"
                stroke-width="4"
                stroke-linecap="round"
              />
              <g>
                <circle cx="132" cy="212" r="9" fill="#22d3ee" />
                <circle cx="338" cy="150" r="9" fill="#34d399" />
                <circle cx="520" cy="156" r="9" fill="#fbbf24" />
              </g>
              <g fill="rgba(226,232,240,0.95)" font-size="14" font-weight="600">
                <text x="148" y="206">HQ 路 Atlanta</text>
                <text x="352" y="144">Coffee Cache 路 Austin</text>
                <text x="362" y="162">Level: Fully Caffeinated</text>
                <text x="534" y="150">Raven Node 路 Remote</text>
                <text x="534" y="168">Status: Online</text>
              </g>
            </svg>
          </div>
          <p class="text-xs text-white/60">
            This map may or may not be powered by coffee, late-night commits, and highly tactical snack breaks.
          </p>
        </div>
        <div class="space-y-2 rounded-xl border border-amber-300/25 bg-amber-400/5 p-4">
          <p class="text-sm font-semibold text-amber-200">Code Word</p>
          <p class="text-lg font-semibold tracking-wide text-amber-100">Beans</p>
        </div>
        <div class="flex flex-wrap gap-3">
          <a
            href="/portfolio"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
          >
            Back to portfolio
          </a>
          <button
            id="secret-logout-button"
            class="rounded-xl border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-semibold text-white/80 hover:bg-white/10"
            type="button"
          >
            Log out
          </button>
        </div>
      </div>
    </div>
  </section>

  <script>
    import "../scripts/auth0-secret.ts";
  </script>
</BaseLayout>
